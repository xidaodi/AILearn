# Re 正则表达式

> 正则表达式，就是使用字符，转义字符和特殊字符组成一个规则，
> 使用这个规则对文本的内容完成一个搜索或匹配或替换的功能、

### 正则表达式的组成

```
普通字符： 大小写字母，数字，符合。。。
转义字符：\w \W \d \D \s \S ...
特殊字符：.  * ? + ^ $ [] {} ()
匹配模式：I U。。。
```

示例：

```python
# 使用正则表达式进行匹配的 基本语法
import re
# 定义字符串
vars = 'iloveyou521tosimida'
# 定义正则表达式
reg = 'love'
# 调用正则函数方法
res = re.findall(reg,vars)
print(res)
```



### 正则表达式规则定义详解



#### 普通字符

```python
# 正则表达式的规则定义
import re

# 普通字符

# vars = 'iloveyou'
# reg = 'love'
# res = re.search(reg,vars).group()
# print(res)
```

#### 转义字符

```python
# 转义字符 \w \W \d \D \s \S ...
varstr = 'a2$_ilove5	21you'

reg = '\w' # 代表 单个 字母、数字、下划线
reg = '\W' # 代表 单个的 非 字母、数字、下划线
reg = '\d' # 代表 单个的 数字
reg = '\D' # 代表 单个的 非数字
reg = '\s' # 代表 单个的 空格符或制表符
reg = '\S' # 代表 单个的 非 空格符或制表符
reg = '\w\w\w\w\d' # 组合使用
```

#### 特殊字符

```python
# 特殊字符 . * + ? {} [] () ^ $
varstr = 'hello WORLD  iloveyou5211imissyou'

reg = '.'    # . 点 代表 单个的 任意字符 除了换行符之外
reg = '\w*'  # * 代表匹配次数  任意次数
reg = '\w+'  # + 代表匹配次数  至少要求匹配一次
reg = '\w+?' # ? 拒绝贪婪，就是前面的匹配规则只要达成则返回
reg = '\w*?'
reg = '\w{5}' # {} 代表匹配次数，{4} 一个数字时，表示必须匹配的次数
reg = '\w{2,4}' # {} 代表匹配次数，{2,5} 两个数字时，表示必须匹配的区间次数
reg = '[A-Z,a-z,0-9,_]' # [] 代表字符的范围 [A-Z,a-z,0-9,_] == \w
reg = '\w+(\d{4})(\w+)'  # () 代表子组，括号中的表达式首先作为整个正则的一部分，另外会把符合小括号中的内容单独提取一份

varstr = '17610105211'
# 定义一个匹配手机号的正则表达式
reg = '^1\d{10}$' # ^ 代表开头  $ 代表结尾

# res = re.search(reg,varstr)
# print(res.group())
# print(res.groups())

'''
*号的特点： 
    如果使用*号，那么在匹配的开始处如果符合要求，
    则按照规则一直向后匹配，直到不符合匹配规则结束并把前面符合的数据返回
    
    如果在匹配的开始处就不符合要求，则直接返回，匹配到的次数为0
'''
```

#### 正则模式

```python
# 正则模式 re.I 不区分大小写
vars = 'iLOVEyou'

reg = '[a-z]{5,10}'
res = re.search(reg,vars,re.I)
print(res)
```



### re模块相关函数

#### re.match() 函数

+  从头开始匹配
+  要么第一个就符合要求，要么不符合
+  匹配成功则返回Match对象，否则返回None
+  可以使用group()方法获取返回的数据
+  可以使用span()方法获取匹配的数据的下标区间

#### re.search() 函数

    + 从字符串开头到结尾进行搜索式匹配
    + 匹配成功则返回Match对象，否则返回None
    + 可以使用group()方法获取返回的数据
    + 可以使用span()方法获取匹配的数据的下标区间

##### search() 和 match() 方法的区别：

```
match()方法是从字符串的开头进行匹配，如果开始就不符合正则的要求，则匹配失败，返回None
search()方法是从字符串的开始位置一直搜索到字符串的最后，如果在整个字符串中都没有匹配到，则失败，返回None
```

#### re.findall()

+ 按照正则表达式的规则在字符中匹配所有符合规则的元素，结果返回一个列表，如果没有找到则返回空列表

#### re.finditer()

+ 按照正则表达式的规则在字符中匹配所有符合规则的元素，返回一个迭代器

#### re.sub() 搜索替换

+ 按照正则表达式的规则，在字符串中找到需要 被替换的字符串，完成一个替换
+ 参数：
  + pattern： 正则表达式的规则，匹配需要被替换的字符串
  + repl：    替换后的字符串
  +  string：  被替换的原始字符串

#### compile()

​    可以直接将正则表达式定义为 正则对象，使用正则对象直接操作

示例：

```python
import re

# 定义字符串
varstr = 'iloveyou521tosimida511'

# 正则表达式
reg = '\d{3}'
# 函数调用
# res = re.findall(reg,varstr)
# res = re.finditer(reg,varstr)
# print(list(res))

# 找到数字，替换成其它
# res = re.sub(reg,'AAA',varstr)
# print(res)

# 直接定义正则表达式对象
reg = re.compile('\d{3}')
# 直接使用创建的正则对象，去调用对应的方法或函数
res = reg.findall(string=varstr)
# print(res)
```

### 练习题

```
# 练习题：
# 1。定义一个正则表达式，来验证邮箱是否正确
# 2。完善 手机号的 正则表达式
# 3。定义一个 匹配 IP 的正则表达式 192.168.1.1  255.255.255.0
```



